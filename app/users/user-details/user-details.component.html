<div class="container spacing">
    <h2>Detailed information about {{user.name || 'user'}} ({{user|nameOrder:'hu'}})</h2>

    <form *ngIf="initializedUser" (ngSubmit)="saveUser()" #userForm="ngForm">

        <div class="form-group">
            <p><b>Id:</b> {{user.id}}</p>
        </div>

        <div class="form-group">
            <label for="email">E-mail:</label>
            <input id="email" type="email" class="form-control" placeholder="E-mail"
                   [(ngModel)]="user.email" (keydown)="keyHandler($event)" ngControl="email" #email="ngForm"
                   required pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$">
        </div>
        <div *ngIf="email.dirty && !email.valid">
            <div class="alert alert-danger" *ngIf="email.errors.required">
                Email is required
            </div>
            <div class="alert alert-danger" *ngIf="email.errors.pattern">
                Email is in wrong format
            </div>
        </div>

        <div class="form-group">
            <label for="name">Name:</label>
            <input id="name" type="text" class="form-control" placeholder="Name"
                   [ngModel]="user.name" (ngModelChange)="parseName($event)">
        </div>

        <p [ngStyle]="setNameLengthStyles()">The user's name contains {{wordLength(user.name)}} words.</p>

        <div class="form-group">
            <button type="submit" class="btn btn-primary" [disabled]="!userForm.form.valid">Save</button>
            <button type="button" class="btn btn-default" (click)="cancel()">Cancel</button>
        </div>

    </form>
    <div *ngIf="!initializedUser">
        <p class="center">Loading...</p>
    </div>

</div>